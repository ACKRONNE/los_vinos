{% extends 'layout.html' %}

{% block title %}Catalogo{% endblock %}

{% block body %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/catalogo.css') }}">

<!-- Action form -->
<form action="{{ url_for('catalogo.addCatalogo') }}" method="POST" class="form-control">
    
    <!-- Informacion de Vino -->
    <div class="vino-info">    
        <div class="row group">

            <div class="column">
                <div class="form-group">
                    <label>Bodega</label>
                    <select id="cat-nombreBod" name="cat-nombreBod">
                    <option value="">Selecciona una bodega</option>
                    {% for bodega in get_bod %}
                        <option value="{{ bodega.nombre }}">{{ bodega.nombre }}</option>
                    {% endfor %}
                    </select>
                </div>
            </div>

            <div class="column">
                <div class="form-group">
                    <label>Clasificacion</label>
                    <select id="cat-nombreCla" name="cat-nombreCla">
                        <option value="">Selecciona un tipo</option>
                        {% for tipo in get_tipo1 %}
                            {% if tipo.nombre|lower == "especiales" %}
                                <option value="{{ tipo.nombre }}">{{ tipo.nombre|capitalize }} (tintos)</option>
                            {% else %}
                                <option value="{{ tipo.nombre }}">{{ tipo.nombre|capitalize }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="column">
                <div class="form-group">
                    <label>-</label>
                    <select id="cat-nombreCla2" name="cat-nombreCla2">
                    <option value="">Selecciona un tipo</option>
                    {% for tipo2 in get_tipo2 %}
                        <option value="{{ tipo2.nombre }}">{{ tipo2.nombre }}</option>
                    {% endfor %}
                    </select>
                </div>
            </div>

        </div>

        <label for="cat-nombre">Nombre</label>
        <input type="text" id="cat-nombre" name="cat-nombre" placeholder="Nombre del vino" required>

        <label for="cat-imagen-vino">Imagen del Vino</label>
        <input type="file" id="cat-imagen-vino" name="cat-imagen-vino" required>

        <div class="row group">
            <div class="column">
                <label for="cat-meses-maduracion">Meses de Maduración</label>
                <input type="number" id="cat-meses-maduracion" name="cat-meses-maduracion" placeholder="Número de meses" required>
            </div>

            <div class="column">
                <label for="cat-promedio-anos-consumo">Promedio Años de Consumo</label>
                <input type="number" id="cat-promedio-anos-consumo" name="cat-promedio-anos-consumo" placeholder="Número de años" required>
            </div>

            <div class="column">
                <label for="cat-temp-servicio">Temperatura de Servicio</label>
                <input type="number" id="cat-temp-servicio" name="cat-temp-servicio" placeholder="Temperatura en grados Celsius" required>
            </div>
        </div>

        <div class="row group">
            <div class="column">
                <label for="cat-ph">pH</label>
                <input type="number" id="cat-ph" name="cat-ph" placeholder="Nivel de pH" required>
            </div>

            <div class="column">
                <label for="cat-grado-alcohol">Grado de Alcohol</label>
                <input type="number" id="cat-grado-alcohol" name="cat-grado-alcohol" placeholder="Grado de alcohol" required>
            </div>

            <div class="column">
                <label for="cat-acidez">Acidez</label>
                <input type="number" id="cat-acidez" name="cat-acidez" placeholder="Nivel de acidez" required>
            </div>
        </div>

        <div class="row group">
            <div class="column">
                <label for="cat-elaboracion">Elaboración</label>
                <textarea id="cat-elaboracion" name="cat-elaboracion" placeholder="Descripción de la elaboración" required></textarea>
            </div>

            <div class="column">
                <label for="cat-descripcion-cata">Descripción de Cata</label>
                <textarea id="cat-descripcion-cata" name="cat-descripcion-cata" placeholder="Descripción de la cata" required></textarea>
            </div>

            <div class="column">
                <label for="cat-maridaje">Maridaje</label>
                <textarea id="cat-maridaje" name="cat-maridaje" placeholder="Sugerencias de maridaje" required></textarea>
            </div>
        </div>
    </div>        
    <!-- // -->

    <!-- Zona de Variedad -->
    <div class="variedad">
        <div class="row group">

            <div class="column">
                <div class="form-group">
                    <label>Nombre variedad</label>
                    <select id="cat-nombre-variedad" name="cat-nombre-variedad">
                        <option value="">Selecciona el nombre</option>
                        {% for uva in get_uva %}
                            <option value="{{ uva.id_uva }}">{{ uva.nombre_variedad }} ({{ uva.tipo_uva }})</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
    </div>
    <!-- // -->

    <!-- Zona de presentacion -->
    <div class="presentacion">
        <div class="row">
            <div class="column">
                <div class="form-group">
                    <label>Tipo Presentacion</label>
                    <select id="cat-tipo" name="cat-tipo">
                        <option value="">Selecciona un tipo</option>
                        {% for presentacion in get_pre %}
                            <option value="{{ presentacion }}">{{ presentacion|capitalize }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <div class="column">
                <label for="cat-cantidad-botellas">Cantidad de Botellas</label>
                <input type="number" id="cat-cantidad-botellas" name="cat-cantidad-botellas" placeholder="Número de botellas" required>
            </div>
        </div>

        <label for="cat-descripcion">Descripción</label>
        <textarea id="cat-descripcion" name="cat-descripcion" placeholder="Descripción de la presentacion" required></textarea>
    </div>
    <!-- // -->
  
    <!-- Boton Enviar -->
    <div class="button-container">
      <button class="submit-btn" type="submit">Aceptar</button>
    </div>
    <!-- // -->

  </form>
  <!-- // -->


<!-- ZONA DE SCRIPTS -->
<!-- Funcion para que funcione el seleccionar clasificacion 2 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('#cat-nombreCla').change(function() {
        var selectedClas = $(this).val();
        $.ajax({
            url: '{{ url_for("catalogo.get_clas") }}',
            data: { 'cat-nombreCla': selectedClas },
            type: 'POST',
            success: function(response) {
                var clasSelect = $('#cat-nombreCla2');
                clasSelect.empty();
                $.each(response, function(index, clasificacion) {
                    clasSelect.append($('<option></option>').attr('value', clasificacion).text(clasificacion));
                });
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
});
</script>
<!-- // -->

{% endblock body %}